<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link href="style.css" rel="stylesheet" type="text/css" title="normal" media=screen>
  <title>Function Parser library for C++: Speed tests</title>
</head>

<body>
<h1>Function parser for C++: Speed tests</h1>

<p>These tests were performed by running each specific test many times in
a loop and then averaging the total time with the number of loops performed.
The parsing, evaluation, evaluation after optimization, and optimization
speeds were measured. The time is specified in microseconds (&micro;s).

<p>(Note that the actual speeds may vary more than the amount of used
significant digits in the list below from execution to execution. The
most significant digit is nevertheless quite accurate.)

<p>These tests were run with the version 4.0.2 of the FunctionParser library.

<h2>Test platform 1</h2>

<p>The following results were obtained on a
3.4GHz Pentium4 using gcc 4.3.1
with the compiler options <code>-O3 -ffast-math -march=native</code>

<hr>
<p>Function:
<code>"x^14 + y^8"</code>
<ul>
 <li>Parse time: 0.98 &micro;s. (1&nbsp;016&nbsp;906 parses/s)
 <li>Eval time: 0.11 &micro;s. (8&nbsp;862&nbsp;419 evals/s)
 <li>Optimized: 0.11 &micro;s. (8&nbsp;980&nbsp;207 evals/s)
 <li>Optimization time: 55 &micro;s. (17&nbsp;944 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"((3*x^4-7*x^3+2*x^2-4*x+10) - (4*y^3+2*y^2-10*y+2))*10"</code>
<ul>
 <li>Parse time: 4.70 &micro;s. (212&nbsp;666 parses/s)
 <li>Eval time: 0.48 &micro;s. (2&nbsp;099&nbsp;682 evals/s)
 <li>Optimized: 0.24 &micro;s. (4&nbsp;236&nbsp;076 evals/s)
 <li>Optimization time: 1486 &micro;s. (672 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"((3*(x+(5*(y+2)-7*x)*3-y)+4*5+3)-7+(8*x+5*y+(7-x))*4)-10*3+4"</code>
<ul>
 <li>Parse time: 4.79 &micro;s. (208&nbsp;879 parses/s)
 <li>Eval time: 0.39 &micro;s. (2&nbsp;560&nbsp;678 evals/s)
 <li>Optimized: 0.06 &micro;s. (15&nbsp;654&nbsp;719 evals/s)
 <li>Optimization time: 830 &micro;s. (1&nbsp;203 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"(tan(x)*cos(x))^2 - 1.2*log(atan2(sqrt((-y^2)+1), y) * 4.91^y) + cos(-x)^2"</code>
<ul>
 <li>Parse time: 3.74 &micro;s. (267&nbsp;641 parses/s)
 <li>Eval time: 0.59 &micro;s. (1&nbsp;705&nbsp;450 evals/s)
 <li>Optimized: 0.23 &micro;s. (4&nbsp;284&nbsp;095 evals/s)
 <li>Optimization time: 403 &micro;s. (2&nbsp;480 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"exp((-x*x-y*y)/100)*sin(sqrt(x*x+y*y))/(10*2) + sin(pow(x,4)-4*pow(x,3)+3*x*x-2*x+2*5-3) - cos(-2*pow(y,4)+5*pow(y,3)-14*x*x+8*x-120/2+4)"</code>
<ul>
 <li>Parse time: 8.48 &micro;s. (117&nbsp;928 parses/s)
 <li>Eval time: 1.05 &micro;s. (948&nbsp;600 evals/s)
 <li>Optimized: 0.91 &micro;s. (1&nbsp;098&nbsp;860 evals/s)
 <li>Optimization time: 1537 &micro;s. (650 optimizes/s)
</ul>

<hr>
<h2>Test platform 2</h2>

<p>The following results were obtained on a
  2.4GHz Intel Core2 Quad using gcc 4.3.4

<hr>
<p>Function:
<code>"x^14 + y^8"</code>
<ul>
 <li>Parse time: 0.54 &micro;s. (1&nbsp;839&nbsp;063 parses/s)
 <li>Eval time: 0.05 &micro;s. (20&nbsp;000&nbsp;400 evals/s)
 <li>Optimized: 0.06 &micro;s. (17&nbsp;295&nbsp;203 evals/s)
 <li>Optimization time: 30 &micro;s. (32&nbsp;638 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"((3*x^4-7*x^3+2*x^2-4*x+10) - (4*y^3+2*y^2-10*y+2))*10"</code>
<ul>
 <li>Parse time: 2.85 &micro;s. (350&nbsp;548 parses/s)
 <li>Eval time: 0.15 &micro;s. (6&nbsp;478&nbsp;341 evals/s)
 <li>Optimized: 0.18 &micro;s. (5&nbsp;605&nbsp;789 evals/s)
 <li>Optimization time: 786 &micro;s. (1&nbsp;272 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"((3*(x+(5*(y+2)-7*x)*3-y)+4*5+3)-7+(8*x+5*y+(7-x))*4)-10*3+4"</code>
<ul>
 <li>Parse time: 3.04 &micro;s. (329&nbsp;059 parses/s)
 <li>Eval time: 0.20 &micro;s. (4&nbsp;914&nbsp;004 evals/s)
 <li>Optimized: 0.04 &micro;s. (27&nbsp;088&nbsp;525 evals/s)
 <li>Optimization time: 442 &micro;s. (2&nbsp;260 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"(tan(x)*cos(x))^2 - 1.2*log(atan2(sqrt((-y^2)+1), y) * 4.91^y) + cos(-x)^2"</code>
<ul>
 <li>Parse time: 2.25 &micro;s. (444&nbsp;006 parses/s)
 <li>Eval time: 0.43 &micro;s. (2&nbsp;320&nbsp;314 evals/s)
 <li>Optimized: 0.15 &micro;s. (6&nbsp;684&nbsp;022 evals/s)
 <li>Optimization time: 220 &micro;s. (4&nbsp;535 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"exp((-x*x-y*y)/100)*sin(sqrt(x*x+y*y))/(10*2) + sin(pow(x,4)-4*pow(x,3)+3*x*x-2*x+2*5-3) - cos(-2*pow(y,4)+5*pow(y,3)-14*x*x+8*x-120/2+4)"</code>
<ul>
 <li>Parse time: 5.22 &micro;s. (191&nbsp;479 parses/s)
 <li>Eval time: 0.49 &micro;s. (2&nbsp;029&nbsp;859 evals/s)
 <li>Optimized: 0.45 &micro;s. (2&nbsp;246&nbsp;166 evals/s)
 <li>Optimization time: 817 &micro;s. (1&nbsp;223 optimizes/s)

</ul>

</body></html>
