<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link href="style.css" rel="stylesheet" type="text/css" title="normal" media=screen>
  <title>Function Parser library for C++: Speed tests</title>
</head>

<body>
<h1>Function parser for C++: Speed tests</h1>

<p>These tests were performed by running each specific test many times in
a loop and then averaging the total time with the number of loops performed.
The parsing, evaluation, evaluation after optimization, and optimization
speeds were measured. The time is specified in microseconds (&micro;s).

<p>(Note that the actual speeds may vary more than the amount of used
significant digits in the list below from execution to execution. The
most significant digit is nevertheless quite accurate.)

<p>These tests were run with the version 4.0.2 of the FunctionParser library.

<h2>Test platform 1</h2>

<p>The following results were obtained on a
3.4GHz Pentium4 using gcc 4.3.1
with the compiler options <code>-O3 -ffast-math -march=native</code>

<hr>
<p>Function:
<code>"pow(x,14)+pow(y,8)"</code>
<ul>
 <li>Parse time: 1.26 &micro;s. (791&nbsp;796 parses/s)
 <li>Eval time: 0.11 &micro;s. (8&nbsp;983&nbsp;232 evals/s)
 <li>Optimized: 0.11 &micro;s. (8&nbsp;984&nbsp;443 evals/s)
 <li>Optimization time: 56 &micro;s. (17&nbsp;852 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"((3*pow(x,4)-7*pow(x,3)+2*x*x-4*x+10) - (4*pow(y,3)+2*y*y-10*y+2))*10"</code>
<ul>
 <li>Parse time: 5.00 &micro;s. (200&nbsp;168 parses/s)
 <li>Eval time: 0.48 &micro;s. (2&nbsp;083&nbsp;773 evals/s)
 <li>Optimized: 0.23 &micro;s. (4&nbsp;280&nbsp;968 evals/s)
 <li>Optimization time: 1502 &micro;s. (665 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"((3*(x+(5*(y+2)-7*x)*3-y)+4*5+3)-7+(8*x+5*y+(7-x))*4)-10*3+4"</code>
<ul>
 <li>Parse time: 5.11 &micro;s. (195&nbsp;777 parses/s)
 <li>Eval time: 0.41 &micro;s. (2&nbsp;420&nbsp;197 evals/s)
 <li>Optimized: 0.06 &micro;s. (15&nbsp;641&nbsp;863 evals/s)
 <li>Optimization time: 856 &micro;s. (1&nbsp;168 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"sin(sqrt(10-x*x+y*y))+cos(sqrt(5-x*x-y*y))+sin(x*x+y*y)"</code>
<ul>
 <li>Parse time: 2.43 &micro;s. (411&nbsp;984 parses/s)
 <li>Eval time: 0.34 &micro;s. (2&nbsp;901&nbsp;195 evals/s)
 <li>Optimized: 0.38 &micro;s. (2&nbsp;634&nbsp;591 evals/s)
 <li>Optimization time: 452 &micro;s. (2&nbsp;208 optimizes/s)
</ul>

<hr>
<p>Function:
<code>"exp((-x*x-y*y)/100)*sin(sqrt(x*x+y*y))/(10*2) + sin(pow(x,4)-4*pow(x,3)+3*x*x-2*x+2*5-3) - cos(-2*pow(y,4)+5*pow(y,3)-14*x*x+8*x-120/2+4)"</code>
<ul>
 <li>Parse time: 9.13 &micro;s. (109&nbsp;531 parses/s)
 <li>Eval time: 1.06 &micro;s. (947&nbsp;506 evals/s)
 <li>Optimized: 0.89 &micro;s. (1&nbsp;128&nbsp;524 evals/s)
 <li>Optimization time: 1509 &micro;s. (662 optimizes/s)
</ul>

<hr>
<h2>Test platform 2</h2>

<p>The following results were obtained on a
  2.4GHz Intel Core2 Quad using gcc 4.3.4

<hr>
<p>Function:
<code>"pow(x,14)+pow(y,8)"</code>
<ul>
 <li>Parse time: 0.67 &micro;s. (1&nbsp;496&nbsp;524 parses/s)
 <li>Eval time: 0.05 &micro;s. (20&nbsp;182&nbsp;042 evals/s)
 <li>Optimized: 0.05 &micro;s. (20&nbsp;303&nbsp;537 evals/s)
 <li>Optimization time: 30 &micro;s. (32&nbsp;886 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"((3*pow(x,4)-7*pow(x,3)+2*x*x-4*x+10) - (4*pow(y,3)+2*y*y-10*y+2))*10"</code>
<ul>
 <li>Parse time: 2.86 &micro;s. (349&nbsp;204 parses/s)
 <li>Eval time: 0.19 &micro;s. (5&nbsp;159&nbsp;319 evals/s)
 <li>Optimized: 0.19 &micro;s. (5&nbsp;154&nbsp;147 evals/s)
 <li>Optimization time: 783 &micro;s. (1&nbsp;275 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"((3*(x+(5*(y+2)-7*x)*3-y)+4*5+3)-7+(8*x+5*y+(7-x))*4)-10*3+4"</code>
<ul>
 <li>Parse time: 3.00 &micro;s. (333&nbsp;345 parses/s)
 <li>Eval time: 0.12 &micro;s. (8&nbsp;026&nbsp;745 evals/s)
 <li>Optimized: 0.04 &micro;s. (26&nbsp;747&nbsp;265 evals/s)
 <li>Optimization time: 439 &micro;s. (2&nbsp;277 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"sin(sqrt(10-x*x+y*y))+cos(sqrt(5-x*x-y*y))+sin(x*x+y*y)"</code>
<ul>
 <li>Parse time: 1.66 &micro;s. (603&nbsp;147 parses/s)
 <li>Eval time: 0.20 &micro;s. (4&nbsp;881&nbsp;382 evals/s)
 <li>Optimized: 0.24 &micro;s. (4&nbsp;217&nbsp;362 evals/s)
 <li>Optimization time: 240 &micro;s. (4&nbsp;160 optimizes/s)

</ul>

<hr>
<p>Function:
<code>"exp((-x*x-y*y)/100)*sin(sqrt(x*x+y*y))/(10*2) + sin(pow(x,4)-4*pow(x,3)+3*x*x-2*x+2*5-3) - cos(-2*pow(y,4)+5*pow(y,3)-14*x*x+8*x-120/2+4)"</code>
<ul>
 <li>Parse time: 5.20 &micro;s. (192&nbsp;199 parses/s)
 <li>Eval time: 0.56 &micro;s. (1&nbsp;789&nbsp;403 evals/s)
 <li>Optimized: 0.46 &micro;s. (2&nbsp;161&nbsp;141 evals/s)
 <li>Optimization time: 814 &micro;s. (1&nbsp;227 optimizes/s)

</ul>

</body></html>
